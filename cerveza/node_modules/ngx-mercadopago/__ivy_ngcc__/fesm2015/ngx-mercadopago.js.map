{"version":3,"file":"ngx-mercadopago.js","sources":["../../../projects/ngx-mercadopago/src/lib/ngx-mercadopago.service.ts","../../../projects/ngx-mercadopago/src/lib/ngx-mercadopago.component.ts","../../../projects/ngx-mercadopago/src/lib/ngx-mercadopago.module.ts","../../../projects/ngx-mercadopago/src/public-api.ts","../../../projects/ngx-mercadopago/src/ngx-mercadopago.ts"],"names":[],"mappings":"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","sourcesContent":["import { InjectionToken } from '@angular/core';\nimport { MercadopagoSDk, PaymentMethod, PaymentForm, CardInstallment, PaymentMethodSearch, CardToken, Installments, ErrorData } from './interfaces/mercadopago-sdk';\nimport { NgxMercadopagoConfiguration } from './interfaces/ngx-mercadopago';\nimport { bindCallback } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n/** @hidden */\nconst pathSDK = 'https://secure.mlstatic.com/sdk/javascript/v1/mercadopago.js';\n/** @hidden */\nexport const ConfigToken = new InjectionToken<NgxMercadopagoConfiguration>('config');\n\ndeclare var Mercadopago: MercadopagoSDk;\nexport class NgxMercadopagoService {\n  initialized: boolean;\n  constructor(\n    private config: NgxMercadopagoConfiguration,\n  ) {\n    if (!config.pathSDK) {\n      config.pathSDK = pathSDK;\n    }\n\n    this.initialized = false;\n  }\n\n  initialize(publishKey?: string): Promise<MercadopagoSDk> {\n    return new Promise((resolve, reject) => {\n      const sdkMercadoPago = this.loadMPScript(this.config.pathSDK);\n\n      sdkMercadoPago.onload = () => {\n        this.initialized = true;\n        Mercadopago.setPublishableKey(publishKey || this.config.publishKey);\n\n        return resolve(Mercadopago);\n      };\n      sdkMercadoPago.onerror = (error) => reject(error);\n    });\n  }\n\n  loadMPScript(src: string): HTMLScriptElement {\n    const script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = src;\n    document.body.appendChild(script);\n    return script;\n  }\n\n  async clearSession() {\n    Mercadopago.clearSession();\n  };\n\n  getPaymentMethod(card: PaymentMethodSearch) {\n    return bindCallback(Mercadopago.getPaymentMethod)(card).pipe(\n      map(([status, resp]) => {\n        if (status === 200) {\n          return { status, data: <PaymentMethod[]>resp, error: <ErrorData>null };\n        } else {\n          return { status, data: <PaymentMethod[]>null, error: <ErrorData>resp };\n        }\n      })\n    )\n  }\n\n  getPaymentMethods(): PaymentMethod[] {\n    return Mercadopago.getPaymentMethods();\n  }\n\n  getIdentificationTypes() {\n    return bindCallback(Mercadopago.getIdentificationTypes)().pipe(\n      map(([status, data]) => ({ status, data }))\n    )\n  }\n\n  getInstallments(card: CardInstallment) {\n    return bindCallback(Mercadopago.getInstallments)(card).pipe(\n      map(([status, resp]) => {\n        if (status === 200) {\n          return { status, data: <Installments[]>resp, error: <ErrorData>null };\n        } else {\n          return { status, data: <Installments[]>null, error: <ErrorData>resp };\n        }\n      })\n    )\n  }\n\n  createToken(form: PaymentForm) {\n    return bindCallback(Mercadopago.createToken)(form).pipe(\n      map(([status, resp]) => {\n        if (status === 200) {\n          return { status, data: <CardToken>resp, error: <ErrorData>null };\n        } else {\n          return { status, data: <CardToken>null, error: <ErrorData>resp };\n        }\n      })\n    )\n  }\n\n  validateExpiryDate(date: string): boolean {\n    return Mercadopago.validateExpiryDate(date);\n  }\n  validateExpiryMonthYear(month: string, year: string): boolean {\n    return Mercadopago.validateExpiryDate(month, year);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-ngx-mercadopago',\n  template: `\n    <p>\n      ngx-mercadopago works!\n    </p>\n  `,\n  styles: [\n  ]\n})\nexport class NgxMercadopagoComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { NgxMercadopagoConfiguration } from './interfaces/ngx-mercadopago';\nimport { NgxMercadopagoService, ConfigToken } from './ngx-mercadopago.service';\n\n\n@NgModule()\nexport class NgxMercadopagoModule {\n  static forRoot(\n    libConfiguration: NgxMercadopagoConfiguration\n  ): ModuleWithProviders<NgxMercadopagoModule> {\n    return {\n      ngModule: NgxMercadopagoModule,\n      providers: [\n        {\n          provide: ConfigToken,\n          useValue: libConfiguration\n        },\n        {\n          provide: NgxMercadopagoService,\n          deps: [ConfigToken]\n        }\n      ]\n    };\n  }\n}","/*\n * Public API Surface of ngx-mercadopago\n */\n\nexport * from './lib/ngx-mercadopago.service';\nexport * from './lib/ngx-mercadopago.component';\nexport * from './lib/ngx-mercadopago.module';\nexport * from './lib/interfaces/mercadopago-sdk';\nexport * from './lib/interfaces/ngx-mercadopago';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}